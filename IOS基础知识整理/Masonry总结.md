# Masonry

## 1.源码解析

>   Masonry目前最流行的Autolayout第三方框架用优雅的代码方式编写Autolayout省去了苹果官方恶心的Autolayout代码大大提高了开发效率 框架地址：https://github.com/SnapKit/Masonrymas_equalTo和equalTo默认情况下mas_equalTo有自动包装功能，比如自动将20包装为@20equalTo没有自动包装功能 如果添加了下面的宏，那么mas_equalTo和equalTo就没有区别#define MAS_SHORTHAND_GLOBALS注意：这个宏一定要添加到#import "Masonry.h"前面mas_width和width默认情况下width是make对象的一个属性，用来添加宽度约束用的，表示对宽度进行约束mas_width是一个属性值，用来当做equalTo的参数，表示某个控件的宽度属性 如果添加了下面的宏，mas_width也可以写成width#define MAS_SHORTHAND mas_height、mas_centerX以此类推可有可无的用法以下方法都仅仅是为了提高可读性，可有可无- (MASConstraint *)with {   return self; } - (MASConstraint *)and {   return self; }

 总结： 1. 适配的历史   4s 以前 不需要适配     坐标都是写死的     [uiScreen mainScreen ].bounds.size    UIButton *btn = nil;     btn.frame = CGRectMake(20,20,320,480)  ios 4  autoResizing 做屏幕适配    ios 6  autoLayout 使用最广泛的屏幕适配    ios 8  sizeClass 最新的屏幕适配  2. autoResizing  注意点 不能跟autoLayout 共存   高度/宽度 跟着父控件的高度/宽度进行缩放   四根线 固定那个位置 一般两根线就能确定一个位置    局限性 兄弟控件不能设置间距 只能是相对于父控件    使用代码 实现autoResizing  控件.autoresizingMask      根storyboard中相反的 storyboard中是 固定那个方向  代码是拉伸那个方向       UIViewAutoresizingNone         = 0,       UIViewAutoresizingFlexibleLeftMargin  = 1 << 0,       UIViewAutoresizingFlexibleRightMargin = 1 << 2,       UIViewAutoresizingFlexibleTopMargin  = 1 << 3,       UIViewAutoresizingFlexibleBottomMargin = 1 << 5        UIViewAutoresizingFlexibleHeight    = 1 << 4,       UIViewAutoresizingFlexibleWidth    = 1 << 1,  3. autoLayout:  概念     1. 参照       相对哪个控件设置约束       哪个控件离当前空间最近,就参照哪个控件     2. 约束       尺寸         宽高       位置         xy  trailing 右边   leading 左边    思路     1. 如果是两个控件的话 那么先搞定一个  4. autoLayout使用代码布局  autoLayout 与 autoResizing 不能共存     view.translatesAutoresizingMaskIntoConstraints = NO;(关闭autoResizing功能)   使用NSLayoutConstrain 调用 constrainWithItem   第一个参数 需要约束的控件   第二个参数 控件的属性   第三个参数 等于 / ＜= / 大于等于   第四个参数 相对那个控件的约束   第五个参数 相对哪个控件的属性   第六个参数 multiplier 乘以🐔   第七个参数 常量 需要加还是减    注意点 以上操作哪个控件最大 就添加到哪个控件上,如果是兄弟那么就添加到老爸身上 , 同一个爷爷的不同的爸爸 添加到爷爷身上   "添加约束到最大的控件上"  5. vfl 布局子控件   抽象语言   知道是神马东西就可以了     H:|(控制器左边)-20(间距)-[redView](显示的控件)-20(间距)-[blueView(显示的控件)(==redView(控件的宽度等于红色控件的宽度))]-20-|(控制器的右边)   使用 NSLayoutConstrain constraintsWithVisualFormat   第一个参数 水平或者是垂直方向的约束(字符串)   第二个参数 对齐的选项   第三个参数 使用到数字可以添加到字典中   第四个参数 将所有的控件的添加到字典中, 键值对 名字都是一样的    "添加数组到self.view"  6. masonry使用  使用步骤     1. 导入masonry的头文件     2. A控件需要约束      使用A 调用 mas_makeConstrain       在block中设置约束       make 就相当于 调用者(控件)  7. 优先级& 动画   优先级最高是的1000      最低的是0   只要是优先级小于1000的 那么就第二次执行(当最高优先级不存在)    动画     当界面发生改变的时候 如果需要动画重新布局       [self.view layoutIfNeeded]    注意:如果使用autolayout来约束控件, 那fraem就失效了, 官方也不建议我们再设置frame了  宽度: 100高度: 100水平居中: X垂直居中: Y注意: 如果利用autolayout约束一个控件, 和我们以前使用frame约束控件一样, 必须设置宽度/高度/X/Y , 如果缺少某一个约束就会报错, 报错有可能会引发一些未知的bug  如果有红色警告:代表缺少约束如果有黄色警告:代表控件当前的位置大小和约束的位置大小不一样距离顶部: 20 相当于设置了Y 距离左边:20 相当于设置了X 距离右边:20 相当于设置了宽度 距离底部:20 相当于设置了高度  注意:在使用Autolayout时,最好给每个控件起一个名称, 方便阅读  红色:距离左边:20 X距离底部:20 Y高度: 50宽度:红色距离蓝色有20的间隙设置红色的宽度和蓝色的宽度一样 蓝色:距离右边:20 X距离底部:20 Y高度: 50宽度:iOS8,默认情况下, 左右两边会留出一段距离,,  红色:距离底部和左边 20 x/y 高度: 50红色距离蓝色 20 ((自动根据屏幕的宽度 - 红色左边的20 + 蓝色右边的20 + 红色和蓝色之间的20 ) / 2)  蓝色:距离右边 20 x Y: 设置蓝色的顶部和红色对齐 高度: 设置蓝色的底部和红色对齐 宽度: 50 蓝色:距离顶部:20  Y距离左边:20  X距离右边:20  宽 高度: 50 红色:高度和蓝色一样 高度红色右边和蓝色右边对齐 X距离蓝色 20 Y  first item  红色 relation  等于 second item 蓝色 constant  加上多少 multiplier  乘以多少 priority  优先级  蓝色:距离顶部:20  Y距离左边:20  X距离右边:20  宽 高度: 50 红色:高度和蓝色一样 高度红色右边和蓝色右边对齐 X距离蓝色 20 Y 水平居中 图片:水平居中垂直居中距离左右为0高度: 568 == 4inch 如果设置红色View的宽度, 约束会自动添加到红色VIew中 如果是设置红色View和绿色View的左边距离固定,约束会自动添加到绿色中(父子关系)如果是设置红色View和黑色View之间的距离固定, 约束会自动添加到控制器的View上